{"remainingRequest":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\src\\components\\Rcode.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\src\\components\\Rcode.vue","mtime":1647260794988},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\babel.config.js","mtime":1646213816292},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646213807074},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1646213808426},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646213807074},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646213808668}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFFSQ29kZSBmcm9tICdxcmNvZGVqczInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJjb2RlIiwKICAvLyBpbXBvcnTlvJXlhaXnmoTnu4Tku7bpnIDopoHms6jlhaXliLDlr7nosaHkuK3miY3og73kvb/nlKgKICBjb21wb25lbnRzOiB7CiAgICBRUkNvZGU6IFFSQ29kZQogIH0sCiAgLy8gcHJvcHM6IFsnZGlhbG9nRGF0YSddLAogIGluamVjdDogWydyZWxvYWQnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgLy8g6L+Z6YeM5a2Y5pS+5pWw5o2uCiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgZGlhbG9nRGF0YTogewogICAgICAgIG9yZGVybmFtZTogIjEuanBnIiwKICAgICAgICBvcmRlcnByaWNlOiAxMjAwLAogICAgICAgIG9yZGVybnVtOiAxCiAgICAgIH0KICAgIH07CiAgfSwKICAvLyDmlrnms5Xpm4blkIgKICBtZXRob2RzOiB7CiAgICBxcmNvZGVkcmF3OiBmdW5jdGlvbiBxcmNvZGVkcmF3KCkgewogICAgICAvLyDnlJ/miJDkuoznu7TnoIEKICAgICAgdGhpcy5xcmNvZGUgPSBuZXcgUVJDb2RlKHRoaXMuJHJlZnMucXJjb2RlLCB7CiAgICAgICAgd2lkdGg6IDEwMCwKICAgICAgICAvLyDkuoznu7TnoIHlrr3luqYKICAgICAgICBoZWlnaHQ6IDEwMCwKICAgICAgICAvLyDkuoznu7TnoIHpq5jluqYKICAgICAgICB0ZXh0OiB0aGlzLmRpYWxvZ0RhdGEuY29kZVVybCwKICAgICAgICBjb3JyZWN0TGV2ZWw6IFFSQ29kZS5Db3JyZWN0TGV2ZWwuSAogICAgICB9KTsKICAgIH0sCiAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5ydWxlLnh4eHh4eHh4KHsKICAgICAgICBvcmRlcklkOiB0aGlzLmRpYWxvZ0RhdGEuaXRlbS5vcmRlcklkLAogICAgICAgIHBheW1lbnRNZXRob2Q6IDEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICcyMDAnICYmIHJlcy5kYXRhLnZhbHVlID09PSAnc3VjY2VzcycpIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S6jOe7tOeggeWIt+aWsOaIkOWKnycpOwoKICAgICAgICAgIF90aGlzLmNvbnRlbnQgPSByZXMuZGF0YS5kYXRhLmNvZGVVcmw7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXJjb2RlJykuaW5uZXJIVE1MID0gJyc7IC8v54K55Ye75LiA5qyh5Yi35paw5bCG5LmL5YmN55qE5LqM57u056CB5YaF5a655riF56m6CgogICAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMucXJjb2RlU2NhbigpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+aUr+S7mOmhtemdouWFs+mXrSEnKTsKICAgICAgdGhpcy5kaWFsb2dEYXRhLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5yZWxvYWQoKTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAucnVsZS5nZXRNeU9yZGVyc0xpc3QoewogICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgc2l6ZTogNSwKICAgICAgICBvcmRlcklkOiB0aGlzLmRpYWxvZ0RhdGEub3JkZXJJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuZGF0YS5yZWNvcmRzWzBdLm9yZGVyU3RhdGUgPT09ICcyJykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aUr+S7mOaIkOWKnyEnKTsKCiAgICAgICAgICBfdGhpczIuZGlhbG9nRGF0YS5kaWFsb2dWaXNpYmxlID0gZmFsc2U7IC8vIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2hvbWUvYnVzYWNjb3VudCcsIHF1ZXJ5OiB7c2hvd3ZpZXc6IDF9fSkKCiAgICAgICAgICBfdGhpczIucmVsb2FkKCk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5kYXRhLnJlY29yZHNbMF0ub3JkZXJTdGF0ZSA9PT0gJzQnKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+aUr+S7mOWksei0pSEnKTsKCiAgICAgICAgICBfdGhpczIuZGlhbG9nRGF0YS5kaWFsb2dWaXNpYmxlID0gZmFsc2U7IC8vIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2hvbWUvYnVzYWNjb3VudCcsIHF1ZXJ5OiB7c2hvd3ZpZXc6IDF9fSkKCiAgICAgICAgICBfdGhpczIucmVsb2FkKCk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5kYXRhLnJlY29yZHNbMF0ub3JkZXJTdGF0ZSA9PT0gJzEnKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uud2FybmluZygn5b6u5L+h5pyq5pSv5LuYIScpOwoKICAgICAgICAgIF90aGlzMi5kaWFsb2dEYXRhLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsgLy8gdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvaG9tZS9idXNhY2NvdW50JywgcXVlcnk6IHtzaG93dmlldzogMX19KQoKICAgICAgICAgIF90aGlzMi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICBjb25zb2xlLmxvZygnY2xvc2UnKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIGNvbnNvbGUubG9nKCdjbG9zZTInKTsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmlK/ku5jlj5bmtoghJyk7IC8vIHRoaXMucmVsb2FkKCkKICAgIH0KICB9LAogIC8vIOeUn+WRveWRqOacnyAtIOaMgui9veWujOaIkO+8iOWPr+S7peiuv+mXrkRPTeWFg+e0oO+8iQogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdtb3VudGVkJyk7CgogICAgICBfdGhpczMucXJjb2RlZHJhdygpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["QRCode","name","components","inject","data","content","dialogVisible","dialogData","ordername","orderprice","ordernum","methods","qrcodedraw","qrcode","$refs","width","height","text","codeUrl","correctLevel","CorrectLevel","H","refresh","$http","rule","xxxxxxxx","orderId","item","paymentMethod","then","res","code","value","$message","success","document","getElementById","innerHTML","$nextTick","qrcodeScan","catch","close","warning","reload","confirm","getMyOrdersList","current","size","records","orderState","error","cancel","console","log","mounted"],"sourceRoot":"","sources":["D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\src\\components\\Rcode.vue"],"sourcesContent":["<!-- 微信二维码 -->\r\n<template>\r\n  jjjj\r\n  <div class=''>\r\n    <el-dialog\r\n        title=\"微信扫码支付\"\r\n        v-model=\"dialogVisible\"\r\n        width=\"20%\"\r\n        center\r\n        @close=\"close\">\r\n\r\n      <img src=\"../assets/img/code.jpg\" style=\"width:260px;height:260px;display:flex\">\r\n      <p style=\"text-align:center;margin:5px\"><el-button type=\"primary\" size=\"mini\" @click=\"refresh\">刷新二维码</el-button></p>\r\n      <p style=\"text-align:center\"><b>订单名称:{{dialogData.ordername}}</b></p>\r\n      <p style=\"text-align:center\"><b>订单价格:{{dialogData.orderprice}}元</b></p>\r\n      <p style=\"text-align:center\"><b>数量:{{dialogData.ordernum}}</b></p>\r\n      <div slot='footer' class=\"dialog-footer\" style=\"text-align:center\">\r\n        <el-button type=\"primary\" @click=\"confirm\">已支付</el-button>\r\n        <el-button type=\"warning\" @click=\"cancel\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport QRCode from 'qrcodejs2'\r\nexport default {\r\n\r\n\r\n  name: \"Rcode\",\r\n// import引入的组件需要注入到对象中才能使用\r\n  components: {QRCode},\r\n  // props: ['dialogData'],\r\n  inject: ['reload'],\r\n  data () {\r\n    // 这里存放数据\r\n    return {\r\n\r\n      content: '',\r\n      dialogVisible:true,\r\n      dialogData:{\r\n        ordername:\"1.jpg\",\r\n        orderprice:1200,\r\n        ordernum:1,\r\n      }\r\n    }\r\n  },\r\n  // 方法集合\r\n  methods: {\r\n    qrcodedraw () { // 生成二维码\r\n      this.qrcode = new QRCode(this.$refs.qrcode, {\r\n        width: 100, // 二维码宽度\r\n        height: 100, // 二维码高度\r\n        text: this.dialogData.codeUrl,\r\n        correctLevel: QRCode.CorrectLevel.H\r\n      })\r\n    },\r\n    refresh () {\r\n      this.$http.rule.xxxxxxxx({orderId: this.dialogData.item.orderId, paymentMethod: 1}).then(res => {\r\n        if (res.data.code === '200' && res.data.value === 'success') {\r\n          this.$message.success('二维码刷新成功')\r\n          this.content = res.data.data.codeUrl\r\n          document.getElementById('qrcode').innerHTML = ''  //点击一次刷新将之前的二维码内容清空\r\n          this.$nextTick(() => {\r\n            this.qrcodeScan()\r\n          })\r\n        }\r\n      }).catch(() => {})\r\n    },\r\n    close () {\r\n      this.$message.warning('支付页面关闭!')\r\n      this.dialogData.dialogVisible = false\r\n      this.reload()\r\n    },\r\n    confirm () {\r\n      this.$http.rule.getMyOrdersList({current: 1, size: 5, orderId: this.dialogData.orderId}).then(res => {\r\n        if (res.data.data.records[0].orderState === '2') {\r\n          this.$message.success('支付成功!')\r\n          this.dialogData.dialogVisible = false\r\n          // this.$router.push({path: '/home/busaccount', query: {showview: 1}})\r\n          this.reload()\r\n        } else if (res.data.data.records[0].orderState === '4') {\r\n          this.$message.error('支付失败!')\r\n          this.dialogData.dialogVisible = false\r\n          // this.$router.push({path: '/home/busaccount', query: {showview: 1}})\r\n          this.reload()\r\n        } else if (res.data.data.records[0].orderState === '1') {\r\n          this.$message.warning('微信未支付!')\r\n          this.dialogData.dialogVisible = false\r\n          // this.$router.push({path: '/home/busaccount', query: {showview: 1}})\r\n          this.reload()\r\n        }\r\n      })\r\n    },\r\n    cancel () {\r\n      console.log('close')\r\n      this.dialogVisible=false\r\n      console.log('close2')\r\n      this.$message.warning('支付取消!')\r\n      // this.reload()\r\n    }\r\n  },\r\n  // 生命周期 - 挂载完成（可以访问DOM元素）\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      console.log('mounted')\r\n      this.qrcodedraw()\r\n    })\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}