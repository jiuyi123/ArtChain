{"remainingRequest":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\src\\views\\Create.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\src\\views\\Create.vue","mtime":1650084417709},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\babel.config.js","mtime":1646213816292},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646213807074},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1646213808426},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646213807074},{"path":"D:\\VUESPRINT\\pvue\\springboot-vue-demo\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646213808668}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKdmFyIF9fZGVmYXVsdF9fID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYXNzd29yZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBpZGVudGl0eURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7fSwKICAgICAgdXNlcmZvcm06IHt9LAogICAgICBuZXdvcmRlcjoge30sCiAgICAgIHRvQ2hhaW46IHt9LAogICAgICBuZnRJZDogMCwKICAgICAgdXBsb2FkSGFzaDogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy51c2VybG9hZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgdXNlcmxvYWQ6IGZ1bmN0aW9uIHVzZXJsb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/ku47mlbDmja7lupPliqDovb3mlbDmja7muLLmn5PliLDliY3nq6/pobXpnaIKICAgICAgcmVxdWVzdC5nZXQoIi9kYXRhai91c2VyL3BlcnNvblNwYWNlIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3BlcnNvbi1yZXMnKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIF90aGlzLnVzZXJmb3JtID0gcmVzLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2coImZpbmlzaCIpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+aWh+S7tuS4iuS8oOaIkOWKn+i/lOWbnuS/oeaBrwogICAgZmlsZXNVcGxvYWRTdWNlc3M6IGZ1bmN0aW9uIGZpbGVzVXBsb2FkU3VjZXNzKHJlcykgewogICAgICBjb25zb2xlLmxvZygicmVzIik7IC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKCiAgICAgIHRoaXMuZm9ybS5uZnRMb2MgPSByZXMuZGF0YS5uZnRMb2M7CiAgICAgIHRoaXMuZm9ybS5uZnRIYXNoID0gcmVzLmRhdGEubmZ0SGFzaDsKICAgICAgdGhpcy5mb3JtLm5mdEZpbmdlclByaW50ID0gcmVzLmRhdGEubmZ0RmluZ2VyUHJpbnQ7CiAgICAgIHRoaXMuZm9ybS5uZnRVaWQgPSByZXMuZGF0YS5uZnRVaWQ7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSk7IC8vIGNvbnNvbGUubG9nKHRoaXMuZm9ybS5uZnRMb2MpOwogICAgfSwKICAgIGJ1aWxkOiBmdW5jdGlvbiBidWlsZCgpIHsKICAgICAgdGhpcy5wYXNzd29yZERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGJlZ2luQ3JlYXQ6IGZ1bmN0aW9uIGJlZ2luQ3JlYXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coImJlZ2luQ3JlYXQiKTsKICAgICAgY29uc29sZS5sb2codGhpcy51c2VyZm9ybSk7CiAgICAgIHRoaXMuZm9ybS5uZnRXcml0ZXJJZCA9IHRoaXMudXNlcmZvcm0udXNlcklkOwogICAgICB0aGlzLmZvcm0ubmZ0T3duZXJJZCA9IHRoaXMudXNlcmZvcm0udXNlcklkOyAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0pCiAgICAgIC8v5bCGbmZ05o+S5YWl5Yiw5pWw5o2u5bqT5LitCgogICAgICByZXF1ZXN0LnBvc3QoIi9kYXRhai9uZnQvY3JlYXRlIiwgdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvL+aJp+ihjOWujOavleWQjue7k+aenOWbnuWIsHJlc+i/mQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8v5by556qX5o+Q56S65q2j56GuCgogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAibWVzc2FnZSIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLns7vnu5/mo4DmtYvpgJrov4fvvIznrYnlvoXnrKzkuInmlrnlrqHmoLgiCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczIubmZ0SWQgPSByZXMuZGF0YTsKICAgICAgICAgIC8qKioqKioqKioqKumAgeWFpeesrOS4ieaWuSoqKioqKioqKioqKi8KICAgICAgICAgIC8vKioqKioqKioqKioqKioqKioqKipvcmRlciDmlrDliqBvcmRlcioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAgICAgICBfdGhpczIubmV3b3JkZXIub3JkZXJTYWxlSWQgPSBfdGhpczIudXNlcmZvcm0udXNlcklkOwogICAgICAgICAgX3RoaXMyLm5ld29yZGVyLm9yZGVyQnV5ZXJJZCA9IF90aGlzMi51c2VyZm9ybS51c2VySWQ7CiAgICAgICAgICBfdGhpczIubmV3b3JkZXIub3JkZXJQcmljZSA9IF90aGlzMi5mb3JtLm5mdFByaWNlOyAvL+S4iuS8oOWMuuWdl+mTvgoKICAgICAgICAgIF90aGlzMi50b0NoYWluLnZudEFjY291bnQgPSBfdGhpczIudXNlcmZvcm0udXNlckFkZHI7IC8vYnV5aGFzaAoKICAgICAgICAgIF90aGlzMi50b0NoYWluLnZudFBhc3N3b3JkID0gX3RoaXMyLnVzZXJmb3JtLnVzZXJDb25maXJtUGFzc3dvcmQgKyBfdGhpczIudXNlcmZvcm0udXNlcklkZW50aXR5OyAvL3Bhc3N3b3JkCgogICAgICAgICAgX3RoaXMyLnRvQ2hhaW4udm50SGFzaCA9IF90aGlzMi5mb3JtLm5mdEhhc2g7IC8v5riF56m6Zm9ybQoKICAgICAgICAgIF90aGlzMi5mb3JtID0ge307IC8v6I635Y+W5Yy65Z2X6ZO+5LiK5Lqk5piTaGFzaAoKICAgICAgICAgIHJlcXVlc3QucG9zdCgiL2FwaS91c2VyL3VwbG9hZCIsIF90aGlzMi50b0NoYWluKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuS4iuS8oOWMuuWdl+mTviIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIudG9DaGFpbik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIF90aGlzMi5uZXdvcmRlci5vcmRlckhhc2ggPSByZXMudm50VHJhbnNhY3Rpb247CiAgICAgICAgICAgIF90aGlzMi51cGxvYWRIYXNoID0gcmVzLnZudFRyYW5zYWN0aW9uOyAvL+S/neWtmOS6pOaYk2hhc2gKCiAgICAgICAgICAgIF90aGlzMi5pZGVudGl0eURpYWxvZ1Zpc2libGUgPSB0cnVlOyAvLyBjb25zb2xlLmxvZyh0aGlzLm5ld29yZGVyLm9yZGVySGFzaCk7CiAgICAgICAgICB9KTsgLy/lsIborqLljZXkv53lrZjliLDmlbDmja7lupPkuK0KCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLm5ld29yZGVyLm9yZGVyTmZ0SWQgPSBfdGhpczIubmZ0SWQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlsIborqLljZXkv53lrZjliLDmlbDmja7lupPkuK0iKTsKICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLm5ld29yZGVyKTsKICAgICAgICAgICAgcmVxdWVzdC5wb3N0KCIvZGF0YWovb3JkZXJzL2luc2VydCIsIF90aGlzMi5uZXdvcmRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/lrZjlnKjnm7jlkIznmoTkvZzlk4EKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMi5mb3JtID0ge307CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5wYXNzd29yZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9PYmplY3QuYXNzaWduKF9fZGVmYXVsdF9fLCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKF9fcHJvcHMsIF9yZWYpIHsKICAgIHZhciBleHBvc2UgPSBfcmVmLmV4cG9zZTsKICAgIGV4cG9zZSgpOwoKICAgIG5hbWU6ICJDcmVhdGUiOwoKICAgIHZhciBfX3JldHVybmVkX18gPSB7CiAgICAgIHJlcXVlc3Q6IHJlcXVlc3QKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn0pOw=="},{"version":3,"mappings":"AAsFA,OAAOA,OAAP,MAAoB,iBAApB;AACE,kBAAe;AACbC,MADa,kBACP;AACJ,WAAM;AACJC,2BAAqB,EAAC,KADlB;AAEJC,2BAAqB,EAAC,KAFlB;AAGJC,UAAI,EAAC,EAHD;AAIJC,cAAQ,EAAC,EAJL;AAKJC,cAAQ,EAAC,EALL;AAMJC,aAAO,EAAC,EANJ;AAOJC,WAAK,EAAC,CAPF;AAQJC,gBAAU,EAAC;AARP,KAAN;AAUD,GAZY;AAabC,SAba,qBAaH;AACR,SAAKC,QAAL;AACD,GAfY;AAgBbC,SAAO,EAAC;AACND,YADM,sBACI;AAAA;;AAAC;AACTX,aAAO,CAACa,GAAR,CAAY,yBAAZ,EAAuCC,IAAvC,CAA4C,aAAG,EAAE;AAC/CC,eAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,eAAO,CAACC,GAAR,CAAYC,GAAZ;AACA,aAAI,CAACZ,QAAL,GAAcY,GAAG,CAAChB,IAAlB;AACAc,eAAO,CAACC,GAAR,CAAY,QAAZ;AACD,OALD;AAMD,KARK;AASN;AACAE,qBAVM,6BAUYD,GAVZ,EAUiB;AACrBF,aAAO,CAACC,GAAR,CAAY,KAAZ,EADqB,CAErB;;AACA,WAAKZ,IAAL,CAAUe,MAAV,GAAiBF,GAAG,CAAChB,IAAJ,CAASkB,MAA1B;AACA,WAAKf,IAAL,CAAUgB,OAAV,GAAkBH,GAAG,CAAChB,IAAJ,CAASmB,OAA3B;AACA,WAAKhB,IAAL,CAAUiB,cAAV,GAAyBJ,GAAG,CAAChB,IAAJ,CAASoB,cAAlC;AACA,WAAKjB,IAAL,CAAUkB,MAAV,GAAiBL,GAAG,CAAChB,IAAJ,CAASqB,MAA1B;AACAP,aAAO,CAACC,GAAR,CAAY,KAAKZ,IAAjB,EAPqB,CAQrB;AACD,KAnBK;AAoBNmB,SApBM,mBAoBC;AACL,WAAKrB,qBAAL,GAA6B,IAA7B;AACD,KAtBK;AAuBNsB,cAvBM,wBAuBM;AAAA;;AACVT,aAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,aAAO,CAACC,GAAR,CAAY,KAAKX,QAAjB;AACA,WAAKD,IAAL,CAAUqB,WAAV,GAAsB,KAAKpB,QAAL,CAAcqB,MAApC;AACA,WAAKtB,IAAL,CAAUuB,UAAV,GAAqB,KAAKtB,QAAL,CAAcqB,MAAnC,CAJU,CAKV;AACA;;AACA1B,aAAO,CAAC4B,IAAR,CAAa,mBAAb,EAAiC,KAAKxB,IAAtC,EAA4CU,IAA5C,CAAiD,aAAG,EAAE;AACpD;AACAC,eAAO,CAACC,GAAR,CAAYC,GAAZ,EAFoD,CAGpD;;AACA,YAAGA,GAAG,CAACY,IAAJ,KAAW,GAAd,EACA;AACE,gBAAI,CAACC,QAAL,CAAc;AACZC,gBAAI,EAAC,SADO;AAEZC,mBAAO,EAAC;AAFI,WAAd;;AAIA,gBAAI,CAACxB,KAAL,GAAWS,GAAG,CAAChB,IAAf;AACA;AACA;;AACA,gBAAI,CAACK,QAAL,CAAc2B,WAAd,GAA4B,MAAI,CAAC5B,QAAL,CAAcqB,MAA1C;AACA,gBAAI,CAACpB,QAAL,CAAc4B,YAAd,GAA6B,MAAI,CAAC7B,QAAL,CAAcqB,MAA3C;AACA,gBAAI,CAACpB,QAAL,CAAc6B,UAAd,GAA2B,MAAI,CAAC/B,IAAL,CAAUgC,QAArC,CAVF,CAYE;;AACA,gBAAI,CAAC7B,OAAL,CAAa8B,UAAb,GAAwB,MAAI,CAAChC,QAAL,CAAciC,QAAtC,CAbF,CAaiD;;AAC/C,gBAAI,CAAC/B,OAAL,CAAagC,WAAb,GAAyB,MAAI,CAAClC,QAAL,CAAcmC,mBAAd,GAAmC,MAAI,CAACnC,QAAL,CAAcoC,YAA1E,CAdF,CAcyF;;AACvF,gBAAI,CAAClC,OAAL,CAAamC,OAAb,GAAsB,MAAI,CAACtC,IAAL,CAAUgB,OAAhC,CAfF,CAiBE;;AACA,gBAAI,CAAChB,IAAL,GAAU,EAAV,CAlBF,CAoBE;;AACAJ,iBAAO,CAAC4B,IAAR,CAAa,kBAAb,EAAgC,MAAI,CAACrB,OAArC,EAA8CO,IAA9C,CAAmD,aAAG,EAAI;AACxDC,mBAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,mBAAO,CAACC,GAAR,CAAY,MAAI,CAACT,OAAjB;AACAQ,mBAAO,CAACC,GAAR,CAAYC,GAAZ;AACA,kBAAI,CAACX,QAAL,CAAcqC,SAAd,GAA0B1B,GAAG,CAAC2B,cAA9B;AACA,kBAAI,CAACnC,UAAL,GAAkBQ,GAAG,CAAC2B,cAAtB,CALwD,CAMxD;;AACA,kBAAI,CAACzC,qBAAL,GAA6B,IAA7B,CAPwD,CAQxD;AACD,WATD,EArBF,CAgCE;;AACA0C,oBAAU,CAAC,YAAM;AACf,kBAAI,CAACvC,QAAL,CAAcwC,UAAd,GAAyB,MAAI,CAACtC,KAA9B;AACAO,mBAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,mBAAO,CAACC,GAAR,CAAY,MAAI,CAACV,QAAjB;AACAN,mBAAO,CAAC4B,IAAR,CAAa,sBAAb,EAAoC,MAAI,CAACtB,QAAzC,EAAmDQ,IAAnD,CAAwD,aAAG,EAAI;AAC7DC,qBAAO,CAACC,GAAR,CAAYC,GAAZ;AACD,aAFD;AAGD,WAPS,EAOP,IAPO,CAAV;AASD,SA3CD,MA4CI;AACF;AACA,gBAAI,CAACa,QAAL,CAAc;AACZC,gBAAI,EAAC,OADO;AAEZC,mBAAO,EAACf,GAAG,CAAC8B;AAFA,WAAd;;AAIA,gBAAI,CAAC3C,IAAL,GAAU,EAAV;AACA;AACD;AACF,OAzDD;AA2DA,WAAKF,qBAAL,GAA2B,KAA3B;AACD;AA1FK;AAhBK,CAAf;;;;;;AAkHF8C,QAAI,EAAE","names":["request","data","passwordDialogVisible","identityDialogVisible","form","userform","neworder","toChain","nftId","uploadHash","created","userload","methods","get","then","console","log","res","filesUploadSucess","nftLoc","nftHash","nftFingerPrint","nftUid","build","beginCreat","nftWriterId","userId","nftOwnerId","post","code","$message","type","message","orderSaleId","orderBuyerId","orderPrice","nftPrice","vntAccount","userAddr","vntPassword","userConfirmPassword","userIdentity","vntHash","orderHash","vntTransaction","setTimeout","orderNftId","msg","name"],"sources":["D:/VUESPRINT/pvue/springboot-vue-demo/vue/src/views/Create.vue"],"sourcesContent":["<template>\r\n  <div  style=\"display: flex;background-color: beige;\">\r\n    <el-card style=\"width: 100%; margin: 10px\">\r\n      <div style=\"text-align:center\">\r\n        <h1>艺  术  品  创  作</h1>\r\n      </div>\r\n      <div display=\"flex\" style=\"margin: 10px 0\">\r\n          <el-form :model=\"form\" label-width=\"120px\">\r\n            <el-form-item label=\"作品上传\">\r\n              <div style=\"text-align:left\">\r\n<!--                <h1>上传一个作品</h1>-->\r\n                <el-upload\r\n                    class=\"upload-demo\"\r\n                    drag\r\n                    action=\"/dataj/files/upload\" :on-success=\"filesUploadSucess\"\r\n                    multiple>\r\n                  <el-icon class=\"el-icon--upload\"><upload-filled/></el-icon>\r\n                  <div class=\"el-upload__text\">\r\n                    Drop file here or <em>click to upload</em>\r\n                  </div>\r\n                </el-upload>\r\n              </div>\r\n            </el-form-item>\r\n            <el-form-item label=\"艺术品名称\">\r\n              <el-input v-model=\"form.nftName\" style=\"width: 80%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"艺术品价格\">\r\n              <el-input v-model=\"form.nftPrice\" style=\"width: 80%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"艺术品类型\">\r\n              <el-radio v-model=\"form.nftClass\" label=\"1\">图片</el-radio>\r\n              <el-radio v-model=\"form.nftClass\" label=\"2\">音乐</el-radio>\r\n              <el-radio v-model=\"form.nftClass\" label=\"3\">视频</el-radio>\r\n              <el-radio v-model=\"form.nftClass\" label=\"4\">实体</el-radio>\r\n            </el-form-item>\r\n            <el-form-item label=\"艺术品描述\" >\r\n              <el-input v-model=\"form.nftDescri\" style=\"width: 80%\"  :rows=\"4\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"外部链接\">\r\n              <el-input v-model=\"form.nftLoc\" style=\"width: 80%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-button size=\"big\" type=\"primary\" style=\"width:10%\" @click=\"build\">创 建</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n      </div>\r\n      <!--      输入确权密码-->\r\n      <el-dialog\r\n          title=\"请输入确权密码\"\r\n          v-model=\"passwordDialogVisible\"\r\n          width=\"20%\"\r\n          center\r\n          @click=\"ConfirmPassword\">\r\n        <el-form>\r\n          <el-form-item prop=\"userIdentity\">\r\n            <el-input :prefix-icon=\"Lock\" v-model=\"userform.userConfirmPassword\"  placeholder=\"请输入确权密码\" show-password></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" style=\"margin-left: 24%\" @click=\"beginCreat\">确认</el-button>\r\n            <el-button type=\"default\" @click=\"passwordDialogVisible = false\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n\r\n      <!--      存储上传的交易hash，作为确权凭证-->\r\n      <el-dialog\r\n          title=\"确权凭证\"\r\n          v-model=\"identityDialogVisible\"\r\n          width=\"40%\"\r\n          center>\r\n        <el-form>\r\n          <el-form-item>\r\n            <el-input v-model=\"uploadHash\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <div style=\"color: red\"><h4>为避免作品确权问题，请妥善保管该凭证</h4></div>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" style=\"margin-left: 40%\" @click=\"identityDialogVisible=false\">确认</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport request from \"@/utils/request\";\r\n  export default {\r\n    data(){\r\n      return{\r\n        passwordDialogVisible:false,\r\n        identityDialogVisible:false,\r\n        form:{},\r\n        userform:{},\r\n        neworder:{},\r\n        toChain:{},\r\n        nftId:0,\r\n        uploadHash:\"\",\r\n      }\r\n    },\r\n    created() {\r\n      this.userload();\r\n    },\r\n    methods:{\r\n      userload(){//从数据库加载数据渲染到前端页面\r\n        request.get(\"/dataj/user/personSpace\").then(res=>{\r\n          console.log('person-res')\r\n          console.log(res)\r\n          this.userform=res.data;\r\n          console.log(\"finish\")\r\n        })\r\n      },\r\n      //文件上传成功返回信息\r\n      filesUploadSucess(res) {\r\n        console.log(\"res\");\r\n        // console.log(res.data);\r\n        this.form.nftLoc=res.data.nftLoc;\r\n        this.form.nftHash=res.data.nftHash;\r\n        this.form.nftFingerPrint=res.data.nftFingerPrint;\r\n        this.form.nftUid=res.data.nftUid;\r\n        console.log(this.form);\r\n        // console.log(this.form.nftLoc);\r\n      },\r\n      build(){\r\n        this.passwordDialogVisible = true;\r\n      },\r\n      beginCreat(){\r\n        console.log(\"beginCreat\")\r\n        console.log(this.userform)\r\n        this.form.nftWriterId=this.userform.userId;\r\n        this.form.nftOwnerId=this.userform.userId;\r\n        // console.log(this.form)\r\n        //将nft插入到数据库中\r\n        request.post(\"/dataj/nft/create\",this.form).then(res=>{\r\n          //执行完毕后结果回到res这\r\n          console.log(res);\r\n          //弹窗提示正确\r\n          if(res.code==='0')\r\n          {\r\n            this.$message({\r\n              type:\"message\",\r\n              message:\"系统检测通过，等待第三方审核\"\r\n            })\r\n            this.nftId=res.data\r\n            /***********送入第三方************/\r\n            //********************order 新加order************************/\r\n            this.neworder.orderSaleId = this.userform.userId;\r\n            this.neworder.orderBuyerId = this.userform.userId;\r\n            this.neworder.orderPrice = this.form.nftPrice;\r\n\r\n            //上传区块链\r\n            this.toChain.vntAccount=this.userform.userAddr;//buyhash\r\n            this.toChain.vntPassword=this.userform.userConfirmPassword+ this.userform.userIdentity;//password\r\n            this.toChain.vntHash= this.form.nftHash;\r\n\r\n            //清空form\r\n            this.form={}\r\n\r\n            //获取区块链上交易hash\r\n            request.post(\"/api/user/upload\",this.toChain).then(res => {\r\n              console.log(\"上传区块链\")\r\n              console.log(this.toChain);\r\n              console.log(res);\r\n              this.neworder.orderHash = res.vntTransaction;\r\n              this.uploadHash = res.vntTransaction;\r\n              //保存交易hash\r\n              this.identityDialogVisible = true\r\n              // console.log(this.neworder.orderHash);\r\n            })\r\n\r\n            //将订单保存到数据库中\r\n            setTimeout(() => {\r\n              this.neworder.orderNftId=this.nftId\r\n              console.log(\"将订单保存到数据库中\")\r\n              console.log(this.neworder)\r\n              request.post(\"/dataj/orders/insert\",this.neworder).then(res => {\r\n                console.log(res);\r\n              });\r\n            }, 3000);\r\n\r\n          }\r\n          else{\r\n            //存在相同的作品\r\n            this.$message({\r\n              type:\"error\",\r\n              message:res.msg,\r\n            })\r\n            this.form={}\r\n            return\r\n          }\r\n        })\r\n\r\n        this.passwordDialogVisible=false;\r\n      },\r\n\r\n\r\n\r\n    }\r\n  }\r\n</script>\r\n<script setup>\r\nname: \"Create\"\r\n</script>\r\n<style scoped>\r\n</style>"]}]}